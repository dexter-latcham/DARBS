{
  self,
  pkgs,
  config,
  ...
}: {
  home.packages = with pkgs; [
    autorandr
    feh
    xlayoutdisplay
  ];


  # not needed, home manager runs autorandr as a one shot
  xsession.initExtra = ''
    autorandr --change
  '';
  # services.autorandr.enable = true;
  programs.autorandr = {
    enable = true;
    hooks.postswitch = {
      no-profile = ''
        if ! ${pkgs.autorandr}/bin/autorandr --debug | grep -q "detected"; then
           ${pkgs.xlayoutdisplay}/bin/xlayoutdisplay -q
        fi

        ${pkgs.xwallpaper}/bin/xwallpaper --zoom ${self}/walls/current.jpeg &
      '';
    };
    profiles = {
      "uni-temp" = {
        fingerprint = {
          "HDMI-1-0" = "00ffffffffffff001e6d14770bc50200071d010380502278eaca95a6554ea1260f5054256b807140818081c0a9c0b300d1c08100d1cfcd4600a0a0381f4030203a001e4e3100001a023a801871382d40582c45001e4e3100001e000000fd00384b1e5a19000a202020202020000000fc004c472048445220574648440a20013a020337f1230907074c100403011f1359da125d5e5f830100006d030c001000b83c20006001020367d85dc4013c8000e305c000e3060501295900a0a038274030203a001e4e3100001a565e00a0a0a02950302035001e4e3100001a000000ff003930374e54435a35423531350a00000000000000000000000000000000000081";
          "eDP-1" = "00ffffffffffff000dae211500000000011e0104a52213780328659759548e271e5054000000010101010101010101010101010101019e8580a070383e403020a50058c110000018ad3780a070383e403020a50058c110000018000000fd003090a5a522010a202020202020000000fe004e3135364852412d4541310a200080";
        };
        config = {
          "eDP-1" = {
            enable = true;
            primary = false;
            position = "2560x0";
            mode = "1920x1080";
            rate = "144.0";
          };
          "HDMI-1-0" = {
            enable = true;
            primary = true;
            position = "0x0";
            mode = "2560x1080";
            rate = "59.98";
          };
        };
      };
      "desk-home" = {
        fingerprint = {
          "DP-1" = "00ffffffffffff0026cd5e6645070000331e0104a53c22783bc365a4554d99260e5054bfcf00814081809500714f81c0b30001010101023a801871382d40582c450056502100001ed09480a070381e403040350056502100001a000000fd0030a5c8c83c010a202020202020000000fc00504c32373730480a2020202020010f02032ff14e010304131f120211900e0f1d1e3f230907078301000065030c0010006d1a0000020130a5000000000000377f8088703814401820350056502100001e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005a";
          "DP-1-0" = "00ffffffffffff0026cd24763733313117210104b55021783b7bd5ac4f47a627125054bfcf00814081809500714f81c0b300d1c00101e77c70a0d0a0295030203a001d4e3100001a000000ff0031323134323332333031313337000000fd0030a5f5f558010a202020202020000000fc00504c3334363757510a2020202002ae02033ef14d61601f9014010304121305023f2309070783010000e200d567030c00100038786d1a0000020130a5000000000000e305c081e606050162621ce77c70a0d0a0295030203a001d4e3100001a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e77012790000030114a25701046f0d9f002f001f009f0528001a00070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000990";
          "eDP-1" = "00ffffffffffff000dae211500000000011e0104a52213780328659759548e271e5054000000010101010101010101010101010101019e8580a070383e403020a50058c110000018ad3780a070383e403020a50058c110000018000000fd003090a5a522010a202020202020000000fe004e3135364852412d4541310a200080";
        };
        config = {
          "eDP-1" = {
            enable = false;
          };
          "DP-1" = {
            enable = true;
            primary = false;
            position = "0x0";
            mode = "1920x1080";
            rate = "60.00";
          };
          "DP-1-0" = {
            enable = true;
            primary = true;
            position = "1920x0";
            mode = "3440x1440";
            rate = "165.0";
          };
        };
      };
      "desk-nvidia" = {
        fingerprint = {
          "DP-0" = "00ffffffffffff0026cd24763733313117210104b55021783b7bd5ac4f47a627125054bfcf00814081809500714f81c0b300d1c00101e77c70a0d0a0295030203a001d4e3100001a000000ff0031323134323332333031313337000000fd0030a5f5f558010a202020202020000000fc00504c3334363757510a2020202002ae02033ef14d61601f9014010304121305023f2309070783010000e200d567030c00100038786d1a0000020130a5000000000000e305c081e606050162621ce77c70a0d0a0295030203a001d4e3100001a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e77012790000030114a25701046f0d9f002f001f009f0528001a00070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000990";
          "DP-1-1" = "00ffffffffffff0026cd5e6645070000331e0104a53c22783bc365a4554d99260e5054bfcf00814081809500714f81c0b30001010101023a801871382d40582c450056502100001ed09480a070381e403040350056502100001a000000fd0030a5c8c83c010a202020202020000000fc00504c32373730480a2020202020010f02032ff14e010304131f120211900e0f1d1e3f230907078301000065030c0010006d1a0000020130a5000000000000377f8088703814401820350056502100001e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005a";
          "eDP-1-1" = "00ffffffffffff000dae211500000000011e0104a52213780328659759548e271e5054000000010101010101010101010101010101019e8580a070383e403020a50058c110000018ad3780a070383e403020a50058c110000018000000fd003090a5a522010a202020202020000000fe004e3135364852412d4541310a200080";
        };
        config = {
          "eDP-1-1" = {
            enable = false;
          };
          "DP-1-1" = {
            enable = true;
            primary = false;
            position = "0x0";
            mode = "1920x1080";
            rate = "60.00";
          };
          "DP-0" = {
            enable = true;
            primary = true;
            position = "1920x0";
            mode = "3440x1440";
            rate = "165.0";
          };
        };
      };
    };
  };
}
